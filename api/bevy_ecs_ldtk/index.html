<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An ECS-friendly LDtk plugin for bevy. Uses bevy_ecs_tilemap as a base."><title>bevy_ecs_ldtk - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="bevy_ecs_ldtk" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../bevy_ecs_ldtk/index.html">bevy_ecs_ldtk</a><span class="version">0.8.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#derives">Derive Macros</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../bevy_ecs_ldtk/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">bevy_ecs_ldtk</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/bevy_ecs_ldtk/lib.rs.html#1-168">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An ECS-friendly <a href="https://ldtk.io/">LDtk</a> plugin for
<a href="https://github.com/bevyengine/bevy">bevy</a>. Uses
<a href="https://github.com/StarArawn/bevy_ecs_tilemap">bevy_ecs_tilemap</a> as a base.</p>
<h4 id="getting-started"><a href="#getting-started">Getting Started</a></h4>
<p>The goal of this plugin is to make it as easy as possible to use LDtk with bevy
for common use cases, while providing solutions to handle more difficult cases.
You only need a few things to get started:</p>
<ol>
<li>Add the <a href="prelude/struct.LdtkPlugin.html" title="struct bevy_ecs_ldtk::prelude::LdtkPlugin">LdtkPlugin</a> to the <a href="../bevy_app/app/struct.App.html" title="struct bevy_app::app::App">App</a></li>
<li>Insert the <a href="prelude/enum.LevelSelection.html" title="enum bevy_ecs_ldtk::prelude::LevelSelection">LevelSelection</a> resource into the <a href="../bevy_app/app/struct.App.html" title="struct bevy_app::app::App">App</a> to pick your level</li>
<li>Spawn an <a href="prelude/struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::prelude::LdtkWorldBundle">LdtkWorldBundle</a></li>
<li>Optionally, use <code>#[derive(LdtkEntity)]</code> and <code>#[derive(LdtkIntCell)]</code> on
bundles and register them to the <a href="../bevy_app/app/struct.App.html" title="struct bevy_app::app::App">App</a> to automatically spawn those bundles
on Entity and IntGrid layers.</li>
</ol>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>bevy::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>bevy_ecs_ldtk::prelude::<span class="kw-2">*</span>;

<span class="kw">fn </span>main() {
    App::new()
        .add_plugins(DefaultPlugins)
        .add_plugins(LdtkPlugin)
        .add_systems(Startup, setup)
        .insert_resource(LevelSelection::index(<span class="number">0</span>))
        .register_ldtk_entity::&lt;MyBundle&gt;(<span class="string">"MyEntityIdentifier"</span>)
        .run();
}

<span class="kw">fn </span>setup(<span class="kw-2">mut </span>commands: Commands, asset_server: Res&lt;AssetServer&gt;) {
    commands.spawn(Camera2dBundle::default());

    commands.spawn(LdtkWorldBundle {
        ldtk_handle: asset_server.load(<span class="string">"my_project.ldtk"</span>),
        ..Default::default()
    });
}

<span class="attr">#[derive(Default, Bundle, LdtkEntity)]
</span><span class="kw">pub struct </span>MyBundle {
    a: ComponentA,
    b: ComponentB,
    <span class="attr">#[sprite_sheet_bundle]
    </span>sprite_bundle: SpriteSheetBundle,
}</code></pre></div>
<h4 id="entity-and-intgrid-layers"><a href="#entity-and-intgrid-layers"><code>Entity</code> and <code>IntGrid</code> layers</a></h4>
<p>You have two options for interacting with <code>Entity</code> and <code>IntGrid</code> LDtk layers.</p>
<ol>
<li>As mentioned above, you can use <code>#[derive(LdtkEntity)]</code> and <code>#[derive(LdtkIntCell)]</code> on your
bundles to hook into the entity/intgrid-tile spawning process.
Of course, you can also implement these traits manually.
There are some field attribute macros available to these derives to handle the most common
use cases.
See <a href="app/trait.LdtkEntity.html" title="trait bevy_ecs_ldtk::app::LdtkEntity">app::LdtkEntity</a> and <a href="app/trait.LdtkIntCell.html" title="trait bevy_ecs_ldtk::app::LdtkIntCell">app::LdtkIntCell</a> for more details.</li>
<li>You can query for <code>Added&lt;EntityInstance&gt;</code> and <code>Added&lt;IntGridCell&gt;</code> components in a system.
This works because, if an LDtk entity or intgrid tile does not match any of your
registrations, they are spawned with these components by default.
Then, you can use <a href="../bevy_ecs/system/commands/struct.Commands.html" title="struct bevy_ecs::system::commands::Commands">Commands</a> to flesh out these entities like you would normally.</li>
</ol>
<p>The first option can be convenient and fast, while the second is good if you need more access
to the world than the <a href="../bevy_app/app/struct.App.html" title="struct bevy_app::app::App">app</a> trait methods provide.</p>
<p>Regardless of your choice, the spawned entities will have an appropriate <a href="../bevy_transform/components/transform/struct.Transform.html" title="struct bevy_transform::components::transform::Transform">Transform</a>.
They will also be spawned and despawned along with the levels they belong to, unless otherwise
specified with a <a href="prelude/struct.Worldly.html" title="struct bevy_ecs_ldtk::prelude::Worldly">Worldly</a> component.
This is because, by default, the entities are spawned as children of their layer entities,
which in turn are children of level entities.</p>
<h4 id="worlds-and-levels"><a href="#worlds-and-levels">Worlds and Levels</a></h4>
<p>When you spawn an <a href="prelude/struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::prelude::LdtkWorldBundle">LdtkWorldBundle</a>, level entities are automatically spawned as children to
the world based off your level selection.
The documentation for <a href="prelude/struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::prelude::LdtkWorldBundle">LdtkWorldBundle</a> goes into a little more detail about the spawning
process.</p>
<p>You can select what levels to spawn via the <a href="prelude/enum.LevelSelection.html" title="enum bevy_ecs_ldtk::prelude::LevelSelection">LevelSelection</a> resource, or via the <a href="prelude/struct.LevelSet.html" title="struct bevy_ecs_ldtk::prelude::LevelSet">LevelSet</a>
component in the <a href="prelude/struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::prelude::LdtkWorldBundle">LdtkWorldBundle</a>.
The <a href="prelude/enum.LevelSelection.html" title="enum bevy_ecs_ldtk::prelude::LevelSelection">LevelSelection</a> resource is a convenient abstraction over the <a href="prelude/struct.LevelSet.html" title="struct bevy_ecs_ldtk::prelude::LevelSet">LevelSet</a> component, and
updates the <a href="prelude/struct.LevelSet.html" title="struct bevy_ecs_ldtk::prelude::LevelSet">LevelSet</a> component automatically when used.
It also responds to <a href="prelude/enum.LevelSpawnBehavior.html#variant.UseWorldTranslation.field.load_level_neighbors" title="field bevy_ecs_ldtk::prelude::LevelSpawnBehavior::load_level_neighbors">LevelSpawnBehavior::UseWorldTranslation::load_level_neighbors</a>, while
<a href="prelude/struct.LevelSet.html" title="struct bevy_ecs_ldtk::prelude::LevelSet">LevelSet</a> does not.</p>
<p>To spawn a new level, you can just update the <a href="prelude/enum.LevelSelection.html" title="enum bevy_ecs_ldtk::prelude::LevelSelection">LevelSelection</a> resource.
The current level will be automatically despawned, unless it’s still selected due to loading
level neighbors.
Updating the <a href="prelude/struct.LevelSet.html" title="struct bevy_ecs_ldtk::prelude::LevelSet">LevelSet</a> component will have similar results.</p>
<p>By default, the levels will be spawned so their bottom left corner is at the origin of the
world.
You can make them spawn according to their world location in LDtk by setting
<a href="prelude/enum.LevelSpawnBehavior.html#variant.UseWorldTranslation" title="variant bevy_ecs_ldtk::prelude::LevelSpawnBehavior::UseWorldTranslation">LevelSpawnBehavior::UseWorldTranslation</a>.</p>
<h4 id="feature-flags"><a href="#feature-flags">Feature flags</a></h4>
<p>This crate uses the following set of <a href="https://doc.rust-lang.org/cargo/reference/features.html#the-features-section">feature flags</a>:</p>
<ul>
<li><code>internal_levels</code>: Enable support for projects that store levels internally.
I.e., projects that store level data within the main project file.</li>
<li><code>external_levels</code>: Enable support for projects that store levels externally.
I.e., projects that store data for each level in files separate from the main project file.</li>
<li><code>derive</code>: Enables the derive macros for <a href="app/trait.LdtkEntity.html" title="trait bevy_ecs_ldtk::app::LdtkEntity">LdtkEntity</a> and <a href="app/trait.LdtkEntity.html" title="trait bevy_ecs_ldtk::app::LdtkEntity">LdtkIntCell</a>.</li>
<li><code>render</code>: Enables rendering via <a href="https://docs.rs/bevy_ecs_tilemap">bevy_ecs_tilemap</a>’s <code>render</code> feature. Disable it if you want
to run in headless mode.</li>
<li><code>atlas</code>: Enables the <code>atlas</code> feature of <a href="https://docs.rs/bevy_ecs_tilemap">bevy_ecs_tilemap</a>. This is required for WASM support
and also for tile spacing to work on Tile and AutoTile layers.</li>
</ul>
<p>The <code>derive</code>, <code>render</code>, and <code>internal_levels</code> features are enabled by default.
Furthermore, one or both of <code>internal_levels</code> and <code>external_levels</code> must be enabled.</p>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.EntityInstance"><code>pub use crate::ldtk::<a class="struct" href="ldtk/struct.EntityInstance.html" title="struct bevy_ecs_ldtk::ldtk::EntityInstance">EntityInstance</a>;</code></div></li></ul><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="app/index.html" title="mod bevy_ecs_ldtk::app">app</a></div><div class="desc docblock-short">Types and traits for hooking into the ldtk loading process via <a href="../bevy_app/app/struct.App.html" title="struct bevy_app::app::App">bevy::app::App</a>.</div></li><li><div class="item-name"><a class="mod" href="assets/index.html" title="mod bevy_ecs_ldtk::assets">assets</a></div><div class="desc docblock-short">Assets and related items for loading LDtk files.</div></li><li><div class="item-name"><a class="mod" href="ldtk/index.html" title="mod bevy_ecs_ldtk::ldtk">ldtk</a></div><div class="desc docblock-short">Contains all the types for serializing/deserializing an LDtk file.</div></li><li><div class="item-name"><a class="mod" href="prelude/index.html" title="mod bevy_ecs_ldtk::prelude">prelude</a></div><div class="desc docblock-short"><code>use bevy_ecs_ldtk::prelude::*;</code> to import commonly used items.</div></li><li><div class="item-name"><a class="mod" href="systems/index.html" title="mod bevy_ecs_ldtk::systems">systems</a></div><div class="desc docblock-short">System functions used by the plugin for processing ldtk files.</div></li><li><div class="item-name"><a class="mod" href="utils/index.html" title="mod bevy_ecs_ldtk::utils">utils</a></div><div class="desc docblock-short">Utility functions used internally by the plugin that have been exposed to the public api.</div></li></ul><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.EntityIid.html" title="struct bevy_ecs_ldtk::EntityIid">EntityIid</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component"><code>Component</code></a> added to all <a href="app/trait.LdtkEntity.html" title="trait bevy_ecs_ldtk::app::LdtkEntity"><code>LdtkEntity</code></a>s by default.</div></li><li><div class="item-name"><a class="struct" href="struct.GridCoords.html" title="struct bevy_ecs_ldtk::GridCoords">GridCoords</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> that stores grid-based coordinate information.</div></li><li><div class="item-name"><a class="struct" href="struct.IntGridCell.html" title="struct bevy_ecs_ldtk::IntGridCell">IntGridCell</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> added to any <code>IntGrid</code> tile by default.</div></li><li><div class="item-name"><a class="struct" href="struct.LayerMetadata.html" title="struct bevy_ecs_ldtk::LayerMetadata">LayerMetadata</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> for storing some LDtk layer information on layer entities.</div></li><li><div class="item-name"><a class="struct" href="struct.LdtkPlugin.html" title="struct bevy_ecs_ldtk::LdtkPlugin">LdtkPlugin</a></div><div class="desc docblock-short">Adds the default systems, assets, and resources used by <code>bevy_ecs_ldtk</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.LdtkSettings.html" title="struct bevy_ecs_ldtk::LdtkSettings">LdtkSettings</a></div><div class="desc docblock-short">Settings resource for the plugin.
Check out the documentation for each field type to learn more.</div></li><li><div class="item-name"><a class="struct" href="struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::LdtkWorldBundle">LdtkWorldBundle</a></div><div class="desc docblock-short"><code>Bundle</code> for spawning LDtk worlds and their levels. The main bundle for using this plugin.</div></li><li><div class="item-name"><a class="struct" href="struct.LevelIid.html" title="struct bevy_ecs_ldtk::LevelIid">LevelIid</a></div><div class="desc docblock-short"><a href="https://docs.rs/bevy/latest/bevy/ecs/component/trait.Component.html"><code>Component</code></a> that stores a level’s instance identifier.</div></li><li><div class="item-name"><a class="struct" href="struct.LevelSet.html" title="struct bevy_ecs_ldtk::LevelSet">LevelSet</a></div><div class="desc docblock-short"><a href="https://docs.rs/bevy/latest/bevy/ecs/component/trait.Component.html"><code>Component</code></a> that determines the desired levels to be loaded for an <a href="prelude/struct.LdtkWorldBundle.html" title="struct bevy_ecs_ldtk::prelude::LdtkWorldBundle"><code>LdtkWorldBundle</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.ProcessLdtkApi.html" title="struct bevy_ecs_ldtk::ProcessLdtkApi">ProcessLdtkApi</a></div><div class="desc docblock-short">Schedule for processing this plugin’s ECS API, inserted after <a href="../bevy_app/main_schedule/struct.Update.html" title="struct bevy_app::main_schedule::Update">Update</a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Respawn.html" title="struct bevy_ecs_ldtk::Respawn">Respawn</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> that indicates that an LDtk level or world should respawn.</div></li><li><div class="item-name"><a class="struct" href="struct.SpawnExclusions.html" title="struct bevy_ecs_ldtk::SpawnExclusions">SpawnExclusions</a></div><div class="desc docblock-short">Specifies data that should be ignored completely when spawning levels. Excluded items will still
be present in the <a href="assets/struct.LdtkProject.html" title="struct bevy_ecs_ldtk::assets::LdtkProject"><code>LdtkProject</code></a> but will not cause any entities to be spawned in the world.</div></li><li><div class="item-name"><a class="struct" href="struct.TileEnumTags.html" title="struct bevy_ecs_ldtk::TileEnumTags">TileEnumTags</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> for storing user-defined, enum-based tags for a particular tile in an LDtk tileset
definition.</div></li><li><div class="item-name"><a class="struct" href="struct.TileMetadata.html" title="struct bevy_ecs_ldtk::TileMetadata">TileMetadata</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> for storing user-defined custom data for a paticular tile in an LDtk tileset
definition.</div></li><li><div class="item-name"><a class="struct" href="struct.Worldly.html" title="struct bevy_ecs_ldtk::Worldly">Worldly</a></div><div class="desc docblock-short"><a href="../bevy_ecs/component/trait.Component.html" title="trait bevy_ecs::component::Component">Component</a> that indicates that an ldtk entity should be a child of the world, not their layer.</div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.IntGridRendering.html" title="enum bevy_ecs_ldtk::IntGridRendering">IntGridRendering</a></div><div class="desc docblock-short">Option in <a href="prelude/struct.LdtkSettings.html" title="struct bevy_ecs_ldtk::prelude::LdtkSettings">LdtkSettings</a> that determines the visual representation of IntGrid layers when they don’t have AutoTile rules.</div></li><li><div class="item-name"><a class="enum" href="enum.LevelBackground.html" title="enum bevy_ecs_ldtk::LevelBackground">LevelBackground</a></div><div class="desc docblock-short">Option in <a href="prelude/struct.LdtkSettings.html" title="struct bevy_ecs_ldtk::prelude::LdtkSettings">LdtkSettings</a> that dictates how the plugin handles level backgrounds.</div></li><li><div class="item-name"><a class="enum" href="enum.LevelEvent.html" title="enum bevy_ecs_ldtk::LevelEvent">LevelEvent</a></div><div class="desc docblock-short">Events fired by the plugin related to level spawning/despawning.</div></li><li><div class="item-name"><a class="enum" href="enum.LevelSelection.html" title="enum bevy_ecs_ldtk::LevelSelection">LevelSelection</a></div><div class="desc docblock-short"><a href="https://docs.rs/bevy/latest/bevy/ecs/prelude/trait.Resource.html"><code>Resource</code></a> for choosing which level(s) to spawn.</div></li><li><div class="item-name"><a class="enum" href="enum.LevelSpawnBehavior.html" title="enum bevy_ecs_ldtk::LevelSpawnBehavior">LevelSpawnBehavior</a></div><div class="desc docblock-short">Option in <a href="prelude/struct.LdtkSettings.html" title="struct bevy_ecs_ldtk::prelude::LdtkSettings">LdtkSettings</a> that determines level spawn behavior.</div></li><li><div class="item-name"><a class="enum" href="enum.SetClearColor.html" title="enum bevy_ecs_ldtk::SetClearColor">SetClearColor</a></div><div class="desc docblock-short">Option in <a href="prelude/struct.LdtkSettings.html" title="struct bevy_ecs_ldtk::prelude::LdtkSettings">LdtkSettings</a> that determines clear color behavior.</div></li></ul><h2 id="derives" class="section-header"><a href="#derives">Derive Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="derive" href="derive.LdtkEntity.html" title="derive bevy_ecs_ldtk::LdtkEntity">LdtkEntity</a></div></li><li><div class="item-name"><a class="derive" href="derive.LdtkIntCell.html" title="derive bevy_ecs_ldtk::LdtkIntCell">LdtkIntCell</a></div></li></ul></section></div></main></body></html>