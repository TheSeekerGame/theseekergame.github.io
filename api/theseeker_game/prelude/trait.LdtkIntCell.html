<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Provides a constructor which can be used for spawning additional components on IntGrid tiles."><title>LdtkIntCell in theseeker_game::prelude - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="theseeker_game" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../theseeker_game/index.html">theseeker_game</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">LdtkIntCell</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.bundle_int_cell">bundle_int_cell</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In theseeker_game::prelude</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../theseeker_game/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">theseeker_game</a>::<wbr><a href="index.html">prelude</a>::<wbr><a class="trait" href="#">LdtkIntCell</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/bevy_ecs_ldtk/app/ldtk_int_cell.rs.html#157">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait LdtkIntCell {
    // Required method
    fn <a href="#tymethod.bundle_int_cell" class="fn">bundle_int_cell</a>(
        int_grid_cell: <a class="struct" href="struct.IntGridCell.html" title="struct theseeker_game::prelude::IntGridCell">IntGridCell</a>,
        layer_instance: &amp;<a class="struct" href="struct.LayerInstance.html" title="struct theseeker_game::prelude::LayerInstance">LayerInstance</a>
    ) -&gt; Self;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Provides a constructor which can be used for spawning additional components on IntGrid tiles.</p>
<p>After implementing this trait on a <a href="trait.Bundle.html" title="trait theseeker_game::prelude::Bundle">Bundle</a>, you can register it to spawn automatically for a
given int grid value via <a href="trait.LdtkIntCellAppExt.html" title="trait theseeker_game::prelude::LdtkIntCellAppExt">LdtkIntCellAppExt</a> on your <a href="struct.App.html" title="struct theseeker_game::prelude::App">App</a>.</p>
<p>For common use cases, you’ll want to use derive-macro <code>#[derive(LdtkIntCell)]</code>, but you can
also provide a custom implementation.</p>
<p>You can also implement this trait on non-<a href="trait.Bundle.html" title="trait theseeker_game::prelude::Bundle">Bundle</a> types, but only <a href="trait.Bundle.html" title="trait theseeker_game::prelude::Bundle">Bundle</a>s can be registered.</p>
<p>If there is an IntGrid tile in the LDtk file whose value is NOT registered, an entity will be
spawned with an <a href="struct.IntGridCell.html" title="struct theseeker_game::prelude::IntGridCell">IntGridCell</a> component, allowing you to flesh it out in your own system.</p>
<p><em>Derive macro requires the “derive” feature, which is enabled by default</em></p>
<h3 id="derive-macro-usage"><a href="#derive-macro-usage">Derive macro usage</a></h3>
<p>Using <code>#[derive(LdtkIntCell)]</code> on a <a href="trait.Bundle.html" title="trait theseeker_game::prelude::Bundle">Bundle</a> struct will allow the type to be registered to the
<a href="struct.App.html" title="struct theseeker_game::prelude::App">App</a> via <a href="trait.LdtkIntCellAppExt.html" title="trait theseeker_game::prelude::LdtkIntCellAppExt">LdtkIntCellAppExt</a> functions:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>bevy::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>bevy_ecs_ldtk::prelude::<span class="kw-2">*</span>;

<span class="kw">fn </span>main() {
    App::empty()
        .add_plugins(LdtkPlugin)
        .register_ldtk_int_cell::&lt;MyBundle&gt;(<span class="number">1</span>)
        <span class="comment">// add other systems, plugins, resources...
        </span>.run();
}

<span class="attr">#[derive(Bundle, LdtkIntCell, Default)]
</span><span class="kw">pub struct </span>MyBundle {
    a: ComponentA,
    b: ComponentB,
    c: ComponentC,
}</code></pre></div>
<p>Now, when loading your ldtk file, any IntGrid tiles with the value <code>1</code> will be spawned with as
tiles with <code>MyBundle</code> inserted.</p>
<p>By default, each component or nested bundle in the bundle will be consumed from bundle’s
<a href="https://doc.rust-lang.org/1.76.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> implementation, which means that deriving (or implementing manually) <a href="https://doc.rust-lang.org/1.76.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a>
is required (unless all fields are overriden, see below).
However, this behavior can be overriden with some field attribute macros…</p>
<h4 id="ldtk_int_cell"><a href="#ldtk_int_cell"><code>#[ldtk_int_cell]</code></a></h4>
<p>Indicates that a component or bundle that implements <a href="trait.LdtkIntCell.html" title="trait theseeker_game::prelude::LdtkIntCell">LdtkIntCell</a> should be created with
<a href="trait.LdtkIntCell.html#tymethod.bundle_int_cell" title="associated function theseeker_game::prelude::LdtkIntCell::bundle_int_cell">LdtkIntCell::bundle_int_cell</a>, allowing for nested <a href="trait.LdtkIntCell.html" title="trait theseeker_game::prelude::LdtkIntCell">LdtkIntCell</a>s.</p>
<p>Note: the <a href="trait.LdtkIntCell.html" title="trait theseeker_game::prelude::LdtkIntCell">LdtkIntCell</a> field decorated with this attribute doesn’t have to be a <a href="trait.Bundle.html" title="trait theseeker_game::prelude::Bundle">Bundle</a>.
This can be useful if a <a href="trait.Component.html" title="trait theseeker_game::prelude::Component">Component</a>’s construction requires the additional access to the world
provided by <a href="trait.LdtkIntCell.html#tymethod.bundle_int_cell" title="associated function theseeker_game::prelude::LdtkIntCell::bundle_int_cell">LdtkIntCell::bundle_int_cell</a>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[derive(Bundle, LdtkIntCell, Default)]
</span><span class="kw">pub struct </span>Wall {
    rigid_body: RigidBody,
}

<span class="attr">#[derive(Bundle, LdtkIntCell, Default)]
</span><span class="kw">pub struct </span>DestructibleWall {
    <span class="attr">#[ldtk_int_cell]
    </span>wall: Wall,
    damage: Damage,
}</code></pre></div>
<h4 id="from_int_grid_cell"><a href="#from_int_grid_cell"><code>#[from_int_grid_cell]</code></a></h4>
<p>Indicates that a component or bundle that implements <a href="https://doc.rust-lang.org/1.76.0/core/convert/trait.From.html" title="trait core::convert::From"><code>From&lt;IntGridCell&gt;</code></a> should be created
using that conversion.
This allows for more modular and custom component construction, and for different structs that
contain the same component to have different constructions of that component, without having to
<code>impl LdtkIntCell</code> for both of them.
It also allows you to have an <a href="struct.IntGridCell.html" title="struct theseeker_game::prelude::IntGridCell">IntGridCell</a> field, since all types <code>T</code> implement <code>From&lt;T&gt;</code>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">impl </span>From&lt;IntGridCell&gt; <span class="kw">for </span>Fluid {
    <span class="kw">fn </span>from(int_grid_cell: IntGridCell) -&gt; Fluid {
        <span class="kw">let </span>viscosity = <span class="kw">match </span>int_grid_cell.value {
            <span class="number">1 </span>=&gt; <span class="number">5</span>,
            <span class="number">2 </span>=&gt; <span class="number">20</span>,
            <span class="kw">_ </span>=&gt; <span class="number">0</span>,
        };

        Fluid {
            viscosity,
        }
    }
}

<span class="attr">#[derive(Bundle, LdtkIntCell, Default)]
</span><span class="kw">pub struct </span>Lava {
    <span class="attr">#[from_int_grid_cell]
    </span>fluid: Fluid,
    <span class="attr">#[from_int_grid_cell]
    </span>int_grid_cell: IntGridCell,
    damage: Damage,
}</code></pre></div>
<h4 id="with"><a href="#with"><code>#[with(...)]</code></a></h4>
<p>Indicates that this component or bundle should be initialized with the given
function.</p>
<p>Note: The given function should have signature <code>fn (int_grid_cell: IntGridCell) -&gt; T</code>
where <code>T</code> is the field type. The function should also be accessible in the scope.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">fn </span>initial_fluid(<span class="kw">_</span>: IntGridCell) -&gt; Fluid {
    Fluid {
        viscosity: <span class="number">20
    </span>}
}

<span class="attr">#[derive(Bundle, LdtkIntCell, Default)]
</span><span class="kw">pub struct </span>Lava {
    <span class="attr">#[with(initial_fluid)]
    </span>fluid: Fluid,
    damage: Damage,
}</code></pre></div>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.bundle_int_cell" class="method"><a class="src rightside" href="../../src/bevy_ecs_ldtk/app/ldtk_int_cell.rs.html#171">source</a><h4 class="code-header">fn <a href="#tymethod.bundle_int_cell" class="fn">bundle_int_cell</a>(
    int_grid_cell: <a class="struct" href="struct.IntGridCell.html" title="struct theseeker_game::prelude::IntGridCell">IntGridCell</a>,
    layer_instance: &amp;<a class="struct" href="struct.LayerInstance.html" title="struct theseeker_game::prelude::LayerInstance">LayerInstance</a>
) -&gt; Self</h4></section></summary><div class="docblock"><p>The constructor used by the plugin when spawning additional components on IntGrid tiles.
If you need access to more of the <a href="struct.World.html" title="struct theseeker_game::prelude::World">World</a>, you can create a system that queries for
<code>Added&lt;IntGridCell&gt;</code>, and flesh out the entity from there, instead of implementing this
trait.
This is because the plugin spawns a tile with an <a href="struct.IntGridCell.html" title="struct theseeker_game::prelude::IntGridCell">IntGridCell</a> component if the tile’s
value is not registered to the app.</p>
<p>Note: whether or not the entity is registered to the app, the plugin will insert a
<a href="struct.SpatialBundle.html" title="struct theseeker_game::prelude::SpatialBundle">SpatialBundle</a> to the entity <strong>after</strong> this bundle is
inserted.
So, any custom implementations of these components within this trait will be overwritten.
Furthermore, a <a href="struct.TileBundle.html" title="struct theseeker_game::prelude::TileBundle">bevy_ecs_tilemap::tiles::TileBundle</a> will be inserted <strong>before</strong> this bundle, so
be careful not to overwrite the components provided by that bundle.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.76.0/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-LdtkIntCell-for-WallBundle" class="impl"><a class="src rightside" href="../../src/theseeker_game/game/wall.rs.html#16">source</a><a href="#impl-LdtkIntCell-for-WallBundle" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.LdtkIntCell.html" title="trait theseeker_game::prelude::LdtkIntCell">LdtkIntCell</a> for <a class="struct" href="../game/wall/struct.WallBundle.html" title="struct theseeker_game::game::wall::WallBundle">WallBundle</a></h3></section></div><script src="../../trait.impl/bevy_ecs_ldtk/app/ldtk_int_cell/trait.LdtkIntCell.js" async></script></section></div></main></body></html>