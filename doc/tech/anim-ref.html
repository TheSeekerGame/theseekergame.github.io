<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Animation Format Reference - TheSeeker Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../game-design.html"><strong aria-hidden="true">1.</strong> Game Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../game-design/audience.html"><strong aria-hidden="true">1.1.</strong> Target Audience</a></li><li class="chapter-item expanded "><a href="../game-design/monetization.html"><strong aria-hidden="true">1.2.</strong> Monetization</a></li><li class="chapter-item expanded "><a href="../game-design/art-direction.html"><strong aria-hidden="true">1.3.</strong> Art Direction</a></li><li class="chapter-item expanded "><a href="../game-design/lore.html"><strong aria-hidden="true">1.4.</strong> Game Lore</a></li><li class="chapter-item expanded "><a href="../game-design/game-mechanics.html"><strong aria-hidden="true">1.5.</strong> Gameplay / Mechanics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../game-design/game-mechanics/active-skills.html"><strong aria-hidden="true">1.5.1.</strong> Active Skills</a></li><li class="chapter-item expanded "><a href="../game-design/game-mechanics/passive-skills.html"><strong aria-hidden="true">1.5.2.</strong> Passive Skills</a></li><li class="chapter-item expanded "><a href="../game-design/game-mechanics/platforming.html"><strong aria-hidden="true">1.5.3.</strong> Platforming</a></li><li class="chapter-item expanded "><a href="../game-design/game-mechanics/creatures-ecosystem.html"><strong aria-hidden="true">1.5.4.</strong> Creatures / Ecosystem</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../policy.html"><strong aria-hidden="true">2.</strong> Development Policies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../policy/assets.html"><strong aria-hidden="true">2.1.</strong> Assets Organization</a></li><li class="chapter-item expanded "><a href="../policy/cli.html"><strong aria-hidden="true">2.2.</strong> CLI Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../tech.html"><strong aria-hidden="true">3.</strong> Technical Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/cli.html"><strong aria-hidden="true">3.1.</strong> Dev Console</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/cli-ref.html"><strong aria-hidden="true">3.1.1.</strong> Cli Commands Reference</a></li><li class="chapter-item expanded "><a href="../tech/cli-howto.html"><strong aria-hidden="true">3.1.2.</strong> How to create new CLI Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/script.html"><strong aria-hidden="true">3.2.</strong> Scripts How-To</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/script-ref.html"><strong aria-hidden="true">3.2.1.</strong> Script Format Reference</a></li></ol></li><li class="chapter-item expanded "><a href="../tech/anim.html"><strong aria-hidden="true">3.3.</strong> Animations How-To</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/anim-ref.html" class="active"><strong aria-hidden="true">3.3.1.</strong> Animation Format Reference</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">TheSeeker Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="animation-format-reference"><a class="header" href="#animation-format-reference">Animation Format Reference</a></h1>
<p>This page describes the syntax / file format for <a href="./anim.html">Animation Assets</a>.</p>
<p>The animation format is based on the <a href="./script-ref.html">script format</a>, with some
differences and extensions (additional functionality). Everything supported in
scripts is also supported in animations.</p>
<h2 id="how-animation-playback-works"><a class="header" href="#how-animation-playback-works">How Animation Playback Works</a></h2>
<p>Animations will automatically advance their frames at a fixed rate. All you have
to do is configure the start frame index, the max frame index, and the speed.</p>
<p>For animations that just play through, once, from start to finish, this is enough.</p>
<p>If you need any more advanced control (such as to make animations that loop or
skip frames), you can add <code>[[script]]</code> sections, using animation-specific
<a href="#available-actions">actions</a>.</p>
<p>When using the Scriptable Animation System, <em>please do not</em> modify the Bevy
Texture Atlas Index value directly from Rust, outside of it!</p>
<h2 id="sprite-sheet"><a class="header" href="#sprite-sheet">Sprite Sheet</a></h2>
<p>Every animation (obviously) requires a sprite sheet (image and layout).</p>
<p>Those can be specified via the <code>image_asset_key</code> and <code>atlas_asset_key</code>
settings (see below). If omitted, they will be derived from the asset key
of the animation file, by appending <code>.image</code> and <code>.atlas</code>.</p>
<p>For example, if you have registered your animation asset with the key
<code>"anim.Player.Idle"</code>, the default is to look for <code>"anim.Player.Idle.image"</code>
and <code>"anim.Player.Idle.atlas"</code>.</p>
<p>However, it is generally good practice to consolidate things into large
sprite sheets, for example having one sprite sheet for all player animations.
In that case, you can still have many animation assets that all share/use
the same sprite sheet, by specifying it explicitly:</p>
<pre><code class="language-toml">[settings]
image_asset_key = "anim.Player.image"
atlas_asset_key = "anim.Player.atlas"
</code></pre>
<h2 id="frame-bookmarks"><a class="header" href="#frame-bookmarks">Frame Bookmarks</a></h2>
<p>To help keep things manageable with complex animations, especially when
you have large consolidated sprite sheets, you can create "frame bookmarks".</p>
<p>Frame bookmarks are names/labels for specific frame index numbers in your
sprite sheet. You can then refer to them in your script actions, to make
any frame numbers mentioned in that <code>[[script]]</code> section be relative to
the bookmark.</p>
<details>
  <summary>
  Example:
  </summary>
<pre><code class="language-toml">[frame_bookmarks]
my_intro = 4 # say our intro is frames 4 to 7
my_idle_loop = 10 # say our loop is frames 10 to 19

[[script]]
frame_bookmark = "my_idle_loop"
run_at_frame = 9 # relative to `frame_bookmark`; so actually frame 19
action = "SetFrameNext"
frame_index = 0  # relative to `frame_bookmark`; so actually frame 10

[[script]]
frame_bookmark = "my_intro"
run_on_playback_control = "Start"
action = "SetFrameNow"
frame_index = 0 # relative to "my_intro"

[[script]]
frame_bookmark = "my_intro"
run_at_frame = 3 # our intro is 3 frames long
action = "SetFrameNext"
# you can use a different bookmark for the destination of
# `SetFrameNext`/`SetFrameNow`, using `to_frame_bookmark`
to_frame_bookmark = "my_idle_loop"
frame_index = 0
</code></pre>
</details>
<p>Using bookmarks can really help maintainabitily. In the future, if
you want to reorganize your sprite sheets, you can just change
the numbers in the bookmarks and your scripts will just work.</p>
<p>In fact, to fully accomplish this, we can do better than the above
example. We can define everything in bookmarks and not use any
fixed numbers in our script sections.</p>
<details>
  <summary>
  Example:
  </summary>
<pre><code class="language-toml">[frame_bookmarks]
intro_start = 4
intro_end = 7
idle_loop_start = 10
idle_loop_end = 19

[[script]]
# `run_at_frame` directly accepts bookmarks!
run_at_frame = "idle_loop_end"
action = "SetFrameNext"
to_frame_bookmark = "idle_loop_start"
# if omitted, `frame_index` defaults to 0

[[script]]
run_on_playback_control = "Start"
action = "SetFrameNow"
to_frame_bookmark = "intro_start"

[[script]]
run_at_frame = "intro_end"
action = "SetFrameNext"
to_frame_bookmark = "idle_loop"
</code></pre>
</details>
<h2 id="settings"><a class="header" href="#settings">Settings</a></h2>
<p>The <code>[settings]</code> section is <em>required</em> in animation files.</p>
<p>The common parameters that are optional in <a href="./script-ref.html#settings">scripts</a>
are also optional here, but there are additional animation-specific settings
that are required in every animation file.</p>
<p>Example:</p>
<pre><code class="language-toml">[settings]
ticks_per_frame = 8
frame_min = 0
frame_max = 7
frame_start = 0
</code></pre>
<p>The above example will create an animation that starts from frame index 0,
advances to the next frame automatically every 8 ticks, and ends after frame 7
is displayed.</p>
<p>This is perfectly sufficient for a basic animation that does not require any
additional behaviors (such as looping or scripts).</p>
<p>You can have an animation without any <code>[[script]]</code> sections.</p>
<h3 id="required-settings"><a class="header" href="#required-settings">Required Settings</a></h3>
<p>The following properties must be specified:</p>
<details>
  <summary>
  <code>ticks_per_frame</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
ticks_per_frame = 8
# ...
</code></pre>
<p>Configures the rate/speed of animation playback. This is how many ticks each frame
will be displayed for, before automatically transitioning to the next frame.</p>
</details>
<details>
  <summary>
  <code>frame_min</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
frame_min = 0
# ...
</code></pre>
<p>The lowest permitted frame index. Frames below this should never be displayed.
Should the frame index ever be a value below this, the animation will stop
automatically.</p>
</details>
<details>
  <summary>
  <code>frame_max</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
frame_max = 20
# ...
</code></pre>
<p>The highest permitted frame index. Frames above this should never be displayed.
Should the frame index ever be a value above this, the animation will stop
automatically.</p>
</details>
<details>
  <summary>
  <code>frame_start</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
frame_start = 2
# ...
</code></pre>
<p>The initial frame that will be displayed at tick 0 when the animation starts
playing.</p>
</details>
<h3 id="optional-settings"><a class="header" href="#optional-settings">Optional Settings</a></h3>
<p>The following additional properties may optionally be specified:</p>
<details>
  <summary>
  <code>play_reversed</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
play_reversed = true
# ...
</code></pre>
<p>If set to <code>true</code> the animation playback will start reversed. That is,
every <code>ticks_per_frame</code>, the frame index will be decreased by one
instead of being increased by one.</p>
<p>If you want to change this dynamically during playback, you can use
the <code>ReversePlayback</code> script action.</p>
</details>
<details>
  <summary>
  <code>atlas_asset_key</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
atlas_asset_key = "anim.Player.atlas"
# ...
</code></pre>
<p>Use a specific texture atlas layout, instead of the default. Provide the asset key string.</p>
<p>The default is derived by appending <code>.atlas</code> to the asset key of this animation script
asset file.</p>
<p>If you specify this, be sure to also specify <code>image_asset_key</code>.</p>
</details>
<details>
  <summary>
  <code>image_asset_key</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[settings]
image_asset_key = "anim.Player.image"
# ...
</code></pre>
<p>Use a specific spritesheet image, instead of the default. Provide the asset key string.</p>
<p>The default is derived by appending <code>.image</code> to the asset key of this animation script
asset file.</p>
<p>If you specify this, be sure to also specify <code>atlas_asset_key</code>.</p>
</details>
<h2 id="actions"><a class="header" href="#actions">Actions</a></h2>
<p>Just like a <a href="./script-ref.html#actions">script file</a>, animations can contain any
number of <em>actions</em> to be performed. The syntax is the same.</p>
<p>Everything available in scripts is also available in animations, but animations
also offer extra animation-specific actions, trigger conditions, parameters, etc.</p>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
run_at_tick = 24
action = "SetFrameNext"
frame_index = 20

[[script]]
run_at_frame = 7
action = "SetSpriteFlip"
flip_x = true
</code></pre>
<h2 id="available-trigger-conditions"><a class="header" href="#available-trigger-conditions">Available Trigger Conditions</a></h2>
<p>The following animation-specific trigger conditions are available, in addition
to everything supported by <a href="./script-ref.html#available-trigger-conditions">scripts</a>:</p>
<details>
  <summary>
  <code>run_at_frame</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml"># using a literal frame number
[[script]]
run_at_frame = 8
action = "..."

# using a bookmark
[[script]]
run_at_frame = "my_bookmark"
action = "..."

# equivalent, but the bookmark
# also applies to any other frame numbers
# in this `[[script]]` section
[[script]]
run_at_frame = 0
frame_bookmark = "my_bookmark"
action = "..."

# you can specify multiple frames
[[script]]
run_at_frames = [ 0, 1, 2, 3, 5, 7, 11 ]
frame_bookmark = "my_bookmark"
action = "..."

# or bookmarks
[[script]]
run_at_frames = [ "bookmark1", "bookmark2", "bookmark3" ]
action = "..."
</code></pre>
<p>Run the action whenever the given frame is displayed.</p>
<p>Any time the animation switches to that frame (regardless of whether it was
done automatically as part of normal playback, or jumped to using a script
action), the action will be performed.</p>
<p>The frame can be specified using a literal number or a bookmark.
If a number is used and a bookmark is specified using the <code>frame_bookmark</code>
<a href="#common-parameters">common parameter</a>, the number will be relative to that.</p>
<p>You can specify multiple frames as an array. In that case, the action will
trigger on any of them.</p>
</details>
<details>
  <summary>
  <code>run_every_n_frames</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml"># frames 0, 8, 16, 24, 32, ...
[[script]]
run_every_n_frames = "8"
action = "..."

# frames 3, 11, 19, 27, 35, ...
[[script]]
run_every_n_frames = "8+3"
action = "..."
</code></pre>
<p>Run the action if the frame number matches the pattern specified.</p>
<p>Any time the animation switches to any of those frames (regardless of whether
it was done automatically as part of normal playback, or jumped to using a
script action), the action will be performed.</p>
<p>If a bookmark is specified using the <code>frame_bookmark</code> <a href="#common-parameters">common
parameter</a>, the numbers will be relative to that.</p>
</details>
<h2 id="common-parameters"><a class="header" href="#common-parameters">Common Parameters</a></h2>
<p>These are additional parameters that can be specified regardless of the action.</p>
<p>Whenever the trigger condition is met, these parameters will be evaluated. They
can be used to modify how the action should run or if it should run at all.</p>
<p>All the parameters from <a href="./script-ref.html#common-parameters">scripts</a> are
available for animations too, plus some additional ones:</p>
<details>
  <summary>
  <code>frame_bookmark</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[frame_bookmarks]
my_bookmark = 10

# Will actually run on frame 14 (affects `run_at_frame`)
[[script]]
run_at_frame = 4 # Relative to "my_bookmark"
frame_bookmark = "my_bookmark"
action = "..."

# Will actually jump to frame 12 (affects `frame_index`)
[[script]]
run_at_tick = 16
frame_bookmark = "my_bookmark"
action "SetFrameNow"
frame_index = 2
</code></pre>
<p>Makes all frame numbers mentioned in this <code>[[script]]</code> section be
relative to the value of a <a href="#frame-bookmarks">frame bookmark</a>.</p>
<p>This applies to Trigger Conditions like <code>run_at_tick</code> as well as
to the parameters of Script Actions like <code>SetFrameNow</code>/<code>SetFrameNext</code>.</p>
<p>Note: Script Actions like <code>SetFrameNow</code>/<code>SetFrameNext</code> also allow you
to specify a bookmark for them to use, which can be different from
the one set using this parameter, if any.</p>
<p>If you specify a bookmark that does not exist, this parameter will
have no effect, and the values will be treated as global/absolute.
In dev builds, the game might print warnings to the log/console.</p>
</details>
<details>
  <summary>
  <code>if_frame_lt</code>/<code>if_frame_le</code>/<code>if_frame_gt</code>/<code>if_frame_ge</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml"># Do something every 3 ticks, but only if we are currently
# displaying a frame between 10 and 19
[[script]]
run_every_n_ticks = "3"
if_frame_ge = 10
if_frame_le = 19
action = "..."

# Do something every 5+1 ticks, but only if we haven't reached
# the frame represented by "my_bookmark" yet
[[script]]
run_every_n_ticks = "5+1"
if_frame_lt = "my_bookmark"
action = "..."
</code></pre>
<p>Only run the action if the current frame index is:</p>
<ul>
<li>less than (lt)</li>
<li>less than or equal to (le)</li>
<li>greater than (gt)</li>
<li>greater than or equal to (ge)</li>
</ul>
<p>the specified value.</p>
<p>It can be specified as either a number or a frame bookmark. If specified
as a number, it will be relative to <code>frame_bookmark</code>, if set.</p>
</details>
<details>
  <summary>
  <code>if_frame_is</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml"># Do something as soon as the "attack" slot is enabled,
# but only if we are currently displaying frame 6
[[script]]
run_on_slot_enable = "attack"
if_frame_is = 6
action = "..."

# Do something every 3 ticks, but only if we are currently
# displaying one of the special magic frames
[[script]]
run_every_n_ticks = "3"
if_frame_is = [ 3, 7, 9 ]
action = "..."
</code></pre>
<p>Only run the action if the current frame index is equal to any of
the specified values.</p>
<p>The values can be specified as either a number or a frame bookmark. If
specified as a number, it will be relative to <code>frame_bookmark</code>, if set.</p>
</details>
<details>
  <summary>
  <code>if_playing_reversed</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml"># This action will only run if the animation is playing backwards (reversed)
[[script]]
run_at_frame = 4
if_playing_reversed = true
action = "..."

# This action will only run if the animation is playing forwards (normal)
[[script]]
run_at_frame = 4
if_playing_reversed = false
action = "..."
</code></pre>
<p>Makes it so that the action only runs if the animation is playing in
the specified direction.</p>
<ul>
<li><code>true</code>: only run when playing backwards / reversed</li>
<li><code>false</code>: only run when playing forwards / normally</li>
</ul>
<p>Neither value is the "default". If this parameter is unset, then the action
runs regardless of the playback direction.</p>
</details>
<h2 id="available-actions"><a class="header" href="#available-actions">Available Actions</a></h2>
<p>The following animation-specific actions are available, in addition to
everything supported by <a href="./script-ref.html#available-actions">scripts</a>:</p>
<details>
  <summary>
  <code>SetFrameNext</code>
  </summary>
<p>Examples:</p>
<pre><code class="language-toml"># After the current frame,
# Jump to frame 100
[[script]]
action = "SetFrameNext"
frame_index = 100

# After the current frame,
# Jump to the frame indicated by "my_bookmark"
[[script]]
action = "SetFrameNext"
to_frame_bookmark = "my_bookmark"

# After the current frame,
# Jump to 2 frames after the frame indicated by "my_bookmark"
[[script]]
action = "SetFrameNext"
to_frame_bookmark = "my_bookmark"
frame_index = 2

# After frame 10 relative to "my_bookmark",
# continue to frame 5 relative to "my_bookmark"
[[script]]
frame_bookmark = "my_bookmark"
run_at_frame = 10
action = "SetFrameNext"
frame_index = 5

# After frame 8 relative to "my_bookmark",
# continue to frame 4 relative to "my_other_bookmark"
[[script]]
frame_bookmark = "my_bookmark"
run_at_frame = 8
action = "SetFrameNext"
to_frame_bookmark = "my_other_bookmark"
frame_index = 4
</code></pre>
<p>Change the next automatic frame. Whatever frame is currently displayed
will complete its <code>ticks_per_frame</code> duration, and then the animation will
continue to the specified frame, instead of advancing by one. Subsequent
playback will continue as normal from this new location.</p>
<p>This is useful to skip around the sprite sheet, and to implement loops
(by going back to a lower frame index).</p>
<hr />
<p><code>frame_index</code> can be used to specify a literal frame number. It defaults to
<code>0</code> if unspecified.</p>
<p>If <code>to_frame_bookmark</code> is specified, the <code>frame_index</code> will be interpreted
relative to that.</p>
<p>Otherwise, if <code>frame_bookmark</code> (the action-agnostic
<a href="#common-parameters">parameter</a>) is specified, the <code>frame_index</code> will be
interpreted relative to that.</p>
<p>Otherwise, the <code>frame_index</code> will be global/absolute.</p>
</details>
<details>
  <summary>
  <code>SetFrameNow</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "SetFrameNow"
frame_index = 100
</code></pre>
<p>Immediately go to the specified frame.</p>
<p>This is useful if you do not want to wait until the next <code>ticks_per_frame</code>
interval, such as in response to player inputs, etc.</p>
<p>Whatever frame is currently displayed will be replaced by the specified
frame immediately, and playback will continue as normal from there. The
frame will wait out any remaining <code>ticks_per_frame</code> duration (as if this
action wasn't run), before transitioning to the next frame.</p>
<p>Any actions that are configured to trigger on the specified frame will run.</p>
<hr />
<p><code>frame_index</code> can be used to specify a literal frame number. It defaults to
<code>0</code> if unspecified.</p>
<p>If <code>to_frame_bookmark</code> is specified, the <code>frame_index</code> will be interpreted
relative to that.</p>
<p>Otherwise, if <code>frame_bookmark</code> (the action-agnostic
<a href="#common-parameters">parameter</a>) is specified, the <code>frame_index</code> will be
interpreted relative to that.</p>
<p>Otherwise, the <code>frame_index</code> will be global/absolute.</p>
<hr />
<p>Note: <code>SetFrameNow</code> is should normally be used with non-frame-based trigger
conditions. It is recommended that you avoid using <code>SetFrameNow</code> in combination
with a <code>run_at_frame</code> (or similar) trigger condition. If you do that, the
animation will technically first go through its original frame (and run
any other actions for it) and then immediately replace it with the new one
(and run its actions), which is often not what you want. Use <code>SetFrameNext</code>
instead, to avoid processing a frame you do not intend to display.</p>
</details>
<details>
  <summary>
  <code>SetSpriteColor</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "SetSpriteColor"
color = "#ff00ff"

[[script]]
action = "SetSpriteColor"
color = [0.75, 0.5, 120.0]
</code></pre>
<p>Changes the colorization of the sprite. The RGBA values of the pixels will be
multiplied by the provided value.</p>
<p>The <code>color</code> field can be specified as either:</p>
<ul>
<li><code>[L, C, H]</code> for LCH color</li>
<li><code>[L, C, H, A]</code> for LCH color + Alpha</li>
<li><code>#RRGGBB</code> for RGB color</li>
<li><code>#RRGGBBAA</code> for RGB + Alpha</li>
</ul>
<p>RGB color is specified in hexadecimal notation, like for Web/CSS.</p>
<p>LCH color is specified as:</p>
<ul>
<li>Lightness has range 0.0 to 1.5</li>
<li>Chroma has range 0.0 to 1.5</li>
<li>Hue has range 0.0 to 360.0 (degrees)</li>
</ul>
</details>
<details>
  <summary>
  <code>SetSpriteFlip</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "SetSpriteFlip"
flip_x = true
flip_y = true
</code></pre>
<p>Changes whether the sprite image should be displayed flipped/mirrored, along
either axis, or both axes.</p>
<p>Each of the <code>flip_x</code> and <code>flip_y</code> fields are optional. If omitted, the old
value will be kept.</p>
<p>Useful for making left/right facing animations from the same texture atlas.</p>
</details>
<details>
  <summary>
  <code>SetTicksPerFrame</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "SetTicksPerFrame"
ticks_per_frame = 4
</code></pre>
<p>Changes the rate of animation playback.</p>
<p>Useful if you want to use a different rate (from what you specified globally in
the <a href="#settings">settings</a>) for some portion of the animation.</p>
</details>
<details>
  <summary>
  <code>ReversePlayback</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "ReversePlayback"
reversed = true # Play backwards

[[script]]
action = "ReversePlayback"
reversed = false # Play normally

[[script]]
action = "ReversePlayback"
# if `reversed` is omitted,
# toggles the current direction of playback
</code></pre>
<p>Reverses the playback direction.</p>
<p>If the animation is reversed, the frame index will be decremented, instead of
incremented, as the animation plays. The animation will end when it reaches
the <code>frame_min</code> setting instead of the usual <code>frame_max</code>.</p>
</details>
<details>
  <summary>
  <code>TransformMove</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformMove"
x = "2.0"
y = "1.0"
z = "0.0"
</code></pre>
<p>Relative move. Cause the sprite entity's Transform to be translated by the given values.</p>
<p>Each of the <code>x</code>, <code>y</code>, <code>z</code> fields are optional. Omit those you want to leave untouched.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformTeleport</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformTeleport"
x = "2.0"
y = "1.0"
z = "5.0"
</code></pre>
<p>Teleport the entity to the given position. Set the sprite entity's Transform's translation to the given values.</p>
<p>The <code>z</code> field is optional. <code>x</code> and <code>y</code> are required.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformSetScale</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformSetScale"
x = "2.0"
y = "1.0"
</code></pre>
<p>Set the scale that the sprite should be displayed as.</p>
<p>Both <code>x</code> and <code>y</code> are required.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformRotateTurns</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformRotateTurns"
turns = "-1/4"
</code></pre>
<p>Rotate the sprite by N turns. 1 turn = 360 degrees.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformRotateDegrees</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformRotateDegrees"
degrees = "-15.0"
</code></pre>
<p>Rotate the sprite by N degrees.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformSetRotationTurns</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformSetRotationTurns"
turns = "-1/4"
</code></pre>
<p>Set the sprite's rotation to a specific value (in turns). 1 turn = 360 degrees.</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>
<details>
  <summary>
  <code>TransformSetRotationDegrees</code>
  </summary>
<p>Example:</p>
<pre><code class="language-toml">[[script]]
action = "TransformSetRotationDegrees"
degrees = "-15.0"
</code></pre>
<p>Set the sprite's rotation to a specific value (in degrees).</p>
<p>The values must be in quotes and can be specified as either:</p>
<ul>
<li>decimal syntax, like: <code>"1.25"</code></li>
<li>fraction syntax, like: <code>"5/4"</code></li>
</ul>
</details>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tech/anim.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tech/anim.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
